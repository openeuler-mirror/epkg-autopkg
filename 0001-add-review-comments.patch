From 963a563ec7a48c8fbef3acd7fb581bb314a3eb58 Mon Sep 17 00:00:00 2001
From: Wu Fengguang <wufengguang@huawei.com>
Date: Mon, 5 Aug 2024 15:53:22 +0800
Subject: [PATCH] add review comments

Signed-off-by: Wu Fengguang <wufengguang@huawei.com>
---
 autopkg.py                   |  4 +++-
 src/builder/generic-build.sh | 12 ++++++++++++
 src/builder/ruby.yaml        |  4 ++++
 src/builder/skel.sh          |  3 +++
 src/parse/autotools.py       |  4 +++-
 5 files changed, 25 insertions(+), 2 deletions(-)
 create mode 100644 src/builder/generic-build.sh
 create mode 100644 src/builder/ruby.yaml
 create mode 100644 src/builder/skel.sh

diff --git a/autopkg.py b/autopkg.py
index e44d0bb..d117ef7 100644
--- a/autopkg.py
+++ b/autopkg.py
@@ -38,7 +38,9 @@ def set_output_dir(path):
 # Press the green button in the gutter to run the script.
 if __name__ == '__main__':
     parser = argparse.ArgumentParser()
-    parser.add_argument("-u", "--url", dest="url", default="",
+    parser.add_argument("-g", "--git-url", dest="git_url", default="",
+                        help="git URL of downloading package")
+    parser.add_argument("-t", "--tar-url", dest="tarball_url", default="",
                         help="http URL of downloading package")
     parser.add_argument("-d", "--dir", dest="directory", default="",
                         help="cloned repository of package")
diff --git a/src/builder/generic-build.sh b/src/builder/generic-build.sh
new file mode 100644
index 0000000..9f2bd5a
--- /dev/null
+++ b/src/builder/generic-build.sh
@@ -0,0 +1,12 @@
+source skel.sh
+source yaml-to-vars.sh
+source $build_system.sh
+./configure $configureFlags
+prep
+configure
+
+
+static data: cmake.yaml
+static funcs: cmake.sh
++ python code generate fields => yaml
+merge 2 yamls => yaml-to-vars.sh
diff --git a/src/builder/ruby.yaml b/src/builder/ruby.yaml
new file mode 100644
index 0000000..f706826
--- /dev/null
+++ b/src/builder/ruby.yaml
@@ -0,0 +1,4 @@
+buildRequires:
+- ruby
+- rubygems-devel
+- ruby-devel
diff --git a/src/builder/skel.sh b/src/builder/skel.sh
new file mode 100644
index 0000000..938f36a
--- /dev/null
+++ b/src/builder/skel.sh
@@ -0,0 +1,3 @@
+prep()
+{
+}
diff --git a/src/parse/autotools.py b/src/parse/autotools.py
index ff8b84a..12c4f9c 100644
--- a/src/parse/autotools.py
+++ b/src/parse/autotools.py
@@ -25,7 +25,9 @@ class AutotoolsParse(BasicParse):
         # TODO(self.scripts中增加编译函数)
         pass
 
-    def detect_build_system(self):
+    def parse_src_dir(self):
+
+    def parse_repo_api(self):
         url = "https://api.pkgs.org/v1/search"  # 收费API
         params = {"query": self.pacakge_name}
         info = requests.get(url, params=params)
-- 
2.23.0

